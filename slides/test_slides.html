<!DOCTYPE html>
<html>
<head>
    <title>Slide Test</title>
    <style>
        body { font-family: Arial; margin: 0; padding: 0; }
        .slide {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 48px;
        }
        .slide.active { display: flex; }
        .slide:nth-child(1) { background: #f00; }
        .slide:nth-child(2) { background: #0f0; }
        .slide:nth-child(3) { background: #00f; color: white; }
        #debug {
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 10px;
            font-size: 14px;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div id="debug">Debug info will appear here</div>
    <div class="slide active">Slide 1 (8 sec)</div>
    <div class="slide">Slide 2 (5 sec)</div>
    <div class="slide">Slide 3 (5 sec)</div>

    <script>
        const slides = document.querySelectorAll('.slide');
        const debug = document.getElementById('debug');
        let currentSlide = 0;
        let slideTimer;

        function log(msg) {
            const timestamp = new Date().toLocaleTimeString();
            debug.innerHTML += `<br>${timestamp}: ${msg}`;
            console.log(msg);
        }

        function showSlide(index) {
            log(`showSlide(${index}) called`);
            slides.forEach(slide => slide.classList.remove('active'));
            slides[index].classList.add('active');
        }

        function nextSlide() {
            log(`nextSlide() called from slide ${currentSlide}`);
            currentSlide = (currentSlide + 1) % slides.length;
            log(`  Advanced to slide ${currentSlide}`);
            showSlide(currentSlide);
        }

        const slideDurations = [8, 5, 5];

        function startSlideShow() {
            log(`startSlideShow() called for slide ${currentSlide}`);
            const duration = slideDurations[currentSlide] * 1000;
            log(`  Setting timer for ${duration}ms`);

            slideTimer = setTimeout(() => {
                log(`  Timer expired!`);
                nextSlide();
                if (currentSlide !== 0) {
                    log(`  Calling startSlideShow() again`);
                    startSlideShow();
                } else {
                    log(`  Back to slide 0, stopping`);
                }
            }, duration);
        }

        log('Initializing presentation');
        log(`Total slides: ${slides.length}`);
        setTimeout(() => {
            log('Starting slideshow');
            startSlideShow();
        }, 2000);
    </script>
</body>
</html>
